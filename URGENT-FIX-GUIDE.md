# ๐จ ุนุงุฌู: ุฅุตูุงุญ ุฎุทุฃ 500 ูู ุชุณุฌูู ุงูุฏูุนุงุช

## ุงููุดููุฉ
ุนูุฏ ูุญุงููุฉ ุชุณุฌูู ุฏูุนุฉ ููุงุชูุฑุฉ ูุธูุฑ ุฎุทุฃ:
```
POST https://elhamdimport.com/api/finance/payments/offline 500 (Internal Server Error)
```

## ุงูุญู ุงูููุฑู

### ุงูุฎุทูุฉ 1: ูุดุฑ ุงูุชุบููุฑุงุช ููุฑุงู
```bash
git push origin master
```

### ุงูุฎุทูุฉ 2: ุจุนุฏ ุงููุดุฑุ ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช
ุงูุชุญ ุงูุฑุงุจุท ุงูุชุงูู ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู:
```
https://elhamdimport.com/api/fix-database-schema
```

ุฃู ุงุณุชุฎุฏู curl:
```bash
curl -X POST https://elhamdimport.com/api/fix-database-schema \
  -H "Content-Type: application/json" \
  -H "Cookie: your-session-cookie"
```

### ุงูุฎุทูุฉ 3: ุงูุชุญูู ูู ุงูุฅุตูุงุญ
1. ุงูุชุธุฑ 5-10 ุฏูุงุฆู ุจุนุฏ ุงููุดุฑ
2. ุฌุฑุจ ุชุณุฌูู ุฏูุนุฉ ุฌุฏูุฏุฉ
3. ุชุฃูุฏ ูู ุฃู ุงูุตูุญุฉ ุชุนูู ุจุฏูู ุฃุฎุทุงุก

## ูุง ุชู ุฅุตูุงุญู

### 1. ุฅุตูุงุญ ุงูู POST endpoint
- ุฅุถุงูุฉ ูุนุงูุฌุฉ ุขููุฉ ูุญููู metadata ุงูููููุฏุฉ
- ุฏุนู ุงูุชูุงูู ูุน ููุงุนุฏ ุงูุจูุงูุงุช ุงููุฏููุฉ

### 2. ุฅุตูุงุญ ุงูู GET endpoint  
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุจุญุซ ุนู ุงููุฏููุนุงุช
- ุชุฌูุจ ุงูุฃุฎุทุงุก ุนูุฏ ุนุฏู ูุฌูุฏ metadata

### 3. ุฅุตูุงุญ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ุนุฑุถ ุงูููุงุชูุฑ
- ุฅุตูุงุญ ุฏุงูุฉ ุงูุชุตููุฉ

## ุงูุชุบููุฑุงุช ุงููุทููุจุฉ ูููุดุฑ

ุชู ุงูุงูุชุฒุงู ุจุงูุชุบููุฑุงุช ุงูุชุงููุฉ:
- `ad49592` - Fix production 500 error in offline payments API
- `8db3e5d` - Fix JavaScript error in finance page filter function

## ุงูุญู ุงูุจุฏูู (ุฅุฐุง ูู ูุนูู ุงููุดุฑ ุงูุชููุงุฆู)

ุฅุฐุง ูู ูุชู ุงููุดุฑ ุงูุชููุงุฆูุ ูู ุจู:

1. **ุงูุฏุฎูู ุฅูู Vercel Dashboard**
2. **ุฅุนุงุฏุฉ ุงููุดุฑ ูุฏููุงู**
   - ุงุฐูุจ ุฅูู ูุดุฑูุนู
   - ุงุถุบุท ุนูู "Redeploy"
   - ุฃู ุงุณุชุฎุฏู Vercel CLI:
   ```bash
   vercel --prod
   ```

3. **ุชุดุบูู ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช**
   ```sql
   -- Connect to your database and run:
   ALTER TABLE payments ADD COLUMN IF NOT EXISTS metadata JSONB;
   ALTER TABLE transactions ADD COLUMN IF NOT EXISTS metadata JSONB;
   ```

## ุงูุชุญูู ูู ุงูุญู

ุจุนุฏ ุงููุดุฑุ ุชุญูู ูู:
1. `https://elhamdimport.com/admin/finance` - ูุฌุจ ุฃู ุชุนูู ุจุฏูู ุฃุฎุทุงุก
2. ุชุณุฌูู ุฏูุนุฉ ุฌุฏูุฏุฉ - ูุฌุจ ุฃู ุชุนูู ุจุฏูู ุฎุทุฃ 500
3. ุนุฑุถ ุงููุฏููุนุงุช - ูุฌุจ ุฃู ุชุธูุฑ ุจุดูู ุตุญูุญ

## ุงูููุช ุงููุชููุน
- ุงููุดุฑ: 5-10 ุฏูุงุฆู
- ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช: 1-2 ุฏูููุฉ
- ุงูุชุญูู: 2-3 ุฏูุงุฆู

**ุงูุฅุฌูุงูู**: 10-15 ุฏูููุฉ

## ุญุงูุฉ ุงูุทูุงุฑุฆ
ุฅุฐุง ุงุณุชูุฑ ุงูุฎุทุฃ:
1. ุชุญูู ูู Vercel Function Logs
2. ุชุฃูุฏ ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชู ุชุญุฏูุซูุง
3. ุชุญูู ูู ุฃู ุงูููุฏ ุงูุฌุฏูุฏ ุชู ูุดุฑู

**ูุงุชู ุงูุทูุงุฑุฆ**: ุชุญูู ูู logs ูู Vercel Dashboard

---
**ุชู ุงูุชุญุฏูุซ**: ุงูุขู - ุฌุงูุฒ ูููุดุฑ ุงูููุฑู