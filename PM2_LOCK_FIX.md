# Namecheap PM2 Lock Issue Solutions

## ðŸ” Ø§Ù„Ù…Ø´ÙƒÙ„Ø©
Ø¹Ù†Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ´ØºÙŠÙ„ `npm run dev` Ø£Ùˆ `npm run build` Ø¹Ù„Ù‰ NamecheapØŒ ØªØ¸Ù‡Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£:
```
Can't acquire lock for app: elhamdimport.com
```

## ðŸ’¡ Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©
1. Ø¹Ù…Ù„ÙŠØ© PM2 Ù‚ÙŠØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¨Ø§Ù„ÙØ¹Ù„
2. Ù…Ù„Ù Ù‚ÙÙ„ (lock file) Ù„Ù… ÙŠØªÙ… Ø­Ø°ÙÙ‡
3. Ø¹Ù…Ù„ÙŠØ© Node.js Ø¹Ø§Ù„Ù‚Ø© ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©
4. PM2 daemon ÙÙŠ Ø­Ø§Ù„Ø© ØºÙŠØ± Ù…Ø³ØªÙ‚Ø±Ø©

## ðŸ› ï¸ Ø§Ù„Ø­Ù„ÙˆÙ„

### Ø§Ù„Ø­Ù„ 1: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (Ù…ÙˆØµÙ‰ Ø¨Ù‡)
```bash
# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ø§Ù„ÙƒØ§Ù…Ù„
./fix-pm2-lock.sh
```

### Ø§Ù„Ø­Ù„ 2: Ø¥ØµÙ„Ø§Ø­ Ø³Ø±ÙŠØ¹
```bash
# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø³Ø±ÙŠØ¹
./quick-fix.sh
```

### Ø§Ù„Ø­Ù„ 3: Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„ÙŠØ¯ÙˆÙŠ
```bash
# Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…
ssh -p 21098 bitcstcp@162.0.209.203

# Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
cd /home/bitcstcp/elhamd-imports

# Ø¥ÙŠÙ‚Ø§Ù Ø¬Ù…ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ§Øª PM2
pm2 stop all
pm2 delete all

# Ù‚ØªÙ„ PM2 daemon
pm2 kill

# Ø­Ø°Ù Ù…Ù„ÙØ§Øª Ø§Ù„Ù‚ÙÙ„
rm -f ~/.pm2/*.lock
rm -f ~/.pm2/dump.pm2

# Ù‚ØªÙ„ Ø£ÙŠ Ø¹Ù…Ù„ÙŠØ§Øª Node.js Ø¹Ø§Ù„Ù‚Ø©
pkill -f node

# Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ PM2
pm2 resurrect

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø§Ù„Ø©
pm2 status
```

### Ø§Ù„Ø­Ù„ 4: Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒØ§Ù…Ù„Ø©
```bash
# Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† PM2 Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
pm2 kill
rm -rf ~/.pm2
pm2 update

# Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ PM2
pm2 resurrect
```

## ðŸ“‹ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­

### 1. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ¦Ø©
```bash
# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥ØµØ¯Ø§Ø± Node.js
node --version

# ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 18 Ø£Ùˆ Ø£Ø¹Ù„Ù‰
# Ø¥Ø°Ø§ ÙƒØ§Ù† Ø£Ù‚Ù„ØŒ Ù‚Ù… Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ«:
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs
```

### 2. Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
```bash
# Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
cd /home/bitcstcp/elhamd-imports

# ØªØ«Ø¨ÙŠØª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ÙŠØ§Øª (Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±)
npm install

# ØªØ´ØºÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„ØªØ·ÙˆÙŠØ±
npm run dev

# Ø£Ùˆ ØªØ´ØºÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ù†ØªØ§Ø¬
npm run build
npm start
```

### 3. Ø§Ø³ØªØ®Ø¯Ø§Ù… PM2 Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
```bash
# ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¹ PM2
pm2 start npm --name "elhamd-imports" -- run dev

# Ø£Ùˆ Ù„Ù„Ø¥Ù†ØªØ§Ø¬
pm2 start npm --name "elhamd-imports" -- start

# Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
pm2 save

# Ø¥Ø¹Ø¯Ø§Ø¯ PM2 Ù„Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
pm2 startup
```

## ðŸ” Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©

### Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø© ÙˆØ§Ù„Ù…Ø¹Ø§Ù„Ø¬
```bash
# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø©
free -h

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬
top -bn1

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù‚Ø±Øµ
df -h
```

### Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙØªÙˆØ­Ø©
```bash
# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙØªÙˆØ­Ø©
lsof | grep node

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ù†Ø§ÙØ° Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹
netstat -tulpn | grep node
```

### Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
```bash
# Ø¹Ø±Ø¶ Ø³Ø¬Ù„Ø§Øª PM2
pm2 logs

# Ø¹Ø±Ø¶ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
journalctl -u pm2 -f
```

## ðŸŽ¯ Ù†ØµØ§Ø¦Ø­ Ù„Ù„ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø´Ø§ÙƒÙ„

### 1. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
```bash
# Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø£ÙˆÙ‚Ù Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„
pm2 stop elhamd-imports
pm2 delete elhamd-imports

# Ø«Ù… Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„Ù‡Ø§
pm2 start npm --name "elhamd-imports" -- start
```

### 2. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ù„ÙØ§Øª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
```bash
# Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù ecosystem.config.js
cat > ecosystem.config.js << EOF
module.exports = {
  apps: [{
    name: 'elhamd-imports',
    script: 'npm',
    args: 'start',
    cwd: '/home/bitcstcp/elhamd-imports',
    instances: 1,
    exec_mode: 'fork',
    watch: false,
    max_memory_restart: '1G',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    }
  }]
}
EOF

# ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ù„Ù Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
pm2 start ecosystem.config.js
```

### 3. Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ§Ù„ØµÙŠØ§Ù†Ø©
```bash
# Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
pm2 monit

# Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ÙØ´Ù„
pm2 start elhamd-imports --restart-delay=3000

# ØªØ­Ø¯ÙŠØ« PM2
pm2 update
```

## ðŸ“ž Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©

Ø¥Ø°Ø§ Ø§Ø³ØªÙ…Ø±Øª Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŒ ÙŠÙ…ÙƒÙ†Ùƒ:
1. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…: `journalctl -xe`
2. Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø¯Ø¹Ù… Namecheap
3. Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¹Ø§Ø¯Ø© ØªØ«Ø¨ÙŠØª Node.js Ùˆ PM2

---

**Ù…Ù„Ø§Ø­Ø¸Ø©:** ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒØ§ÙÙŠØ© (sudo) Ù„ØªÙ†ÙÙŠØ° Ø¨Ø¹Ø¶ Ø§Ù„Ø£ÙˆØ§Ù…Ø±.